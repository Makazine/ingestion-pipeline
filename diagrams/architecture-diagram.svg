<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#00d4ff"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00d4aa"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="url(#bgGradient)"/>
  
  <!-- Title -->
  <text x="600" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="url(#headerGradient)">
    üèóÔ∏è NDJSON to Parquet Pipeline Architecture
  </text>
  <text x="600" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#8892b0">
    SQS + Manifest + Glue Streaming v1.1.0
  </text>
  
  <!-- Layer Labels -->
  <text x="150" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#64ffda" letter-spacing="2">DATA INGESTION</text>
  <text x="400" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#64ffda" letter-spacing="2">PROCESSING</text>
  <text x="700" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#64ffda" letter-spacing="2">STORAGE</text>
  <text x="1000" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#64ffda" letter-spacing="2">MONITORING</text>
  
  <!-- S3 Input Bucket -->
  <g transform="translate(50, 130)">
    <rect width="200" height="140" rx="12" fill="#1e2a3a" stroke="#ff9f43" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#ff9f43" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff9f43">üì¶ S3 Input Bucket</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ NDJSON files (3.5MB)</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ ~200,000 files/hour</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Date-prefixed naming</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ S3 event notifications</text>
  </g>
  
  <!-- SQS Queue -->
  <g transform="translate(50, 290)">
    <rect width="200" height="160" rx="12" fill="#1e2a3a" stroke="#00d4ff" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#00d4ff" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#00d4ff">üìÆ SQS Queue</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ ~55 messages/second</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 15 min visibility timeout</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 14-day retention</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Long polling (20s)</text>
    <text x="15" y="140" font-family="Arial, sans-serif" font-size="11" fill="#ff6b6b">‚Ä¢ Dead Letter Queue</text>
  </g>
  
  <!-- Manifest Builder Lambda -->
  <g transform="translate(300, 130)">
    <rect width="200" height="160" rx="12" fill="#1e2a3a" stroke="#ff6b6b" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#ff6b6b" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff6b6b">Œª Manifest Builder</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Validates files (¬±10%)</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Groups into 1GB batches</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Creates manifest files</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Distributed locking</text>
    <text x="15" y="145" font-family="Arial, sans-serif" font-size="10" fill="#64ffda">512MB | 3min timeout</text>
  </g>
  
  <!-- Glue Streaming -->
  <g transform="translate(300, 320)">
    <rect width="200" height="180" rx="12" fill="#1e2a3a" stroke="#a55eea" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#a55eea" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#a55eea">üîß Glue Streaming</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 10 √ó G.2X workers</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ PySpark + Snappy</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 24/7 continuous</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Checkpoint recovery</text>
    <text x="15" y="140" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 30s trigger interval</text>
    <text x="15" y="165" font-family="Arial, sans-serif" font-size="10" fill="#64ffda">2-5 min per batch</text>
  </g>
  
  <!-- DynamoDB -->
  <g transform="translate(550, 130)">
    <rect width="200" height="160" rx="12" fill="#1e2a3a" stroke="#26de81" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#26de81" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#26de81">üóÑÔ∏è DynamoDB</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ File Tracking Table</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Metrics Table</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ On-demand billing</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ GSI for status queries</text>
    <text x="15" y="140" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 7-day TTL</text>
  </g>
  
  <!-- S3 Output -->
  <g transform="translate(550, 320)">
    <rect width="200" height="160" rx="12" fill="#1e2a3a" stroke="#ff9f43" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#ff9f43" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff9f43">üì¶ S3 Output</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Parquet format</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Snappy compression</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Date partitioned</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ 128MB target files</text>
    <text x="15" y="140" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Intelligent Tiering</text>
  </g>
  
  <!-- Control Plane -->
  <g transform="translate(800, 130)">
    <rect width="200" height="140" rx="12" fill="#1e2a3a" stroke="#ff6b6b" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#ff6b6b" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff6b6b">üéÆ Control Plane</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ State management</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Anomaly detection</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Cost tracking</text>
    <text x="15" y="120" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Status updates</text>
  </g>
  
  <!-- CloudWatch -->
  <g transform="translate(800, 290)">
    <rect width="200" height="120" rx="12" fill="#1e2a3a" stroke="#74b9ff" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#74b9ff" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#74b9ff">üìà CloudWatch</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Custom metrics</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Dashboard</text>
    <text x="15" y="100" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Alarms</text>
  </g>
  
  <!-- SNS -->
  <g transform="translate(800, 430)">
    <rect width="200" height="100" rx="12" fill="#1e2a3a" stroke="#fd79a8" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="40" rx="12" fill="#fd79a8" opacity="0.2"/>
    <text x="100" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fd79a8">üìß SNS Alerts</text>
    <text x="15" y="60" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ Job failures</text>
    <text x="15" y="80" font-family="Arial, sans-serif" font-size="11" fill="#ccc">‚Ä¢ DLQ messages</text>
  </g>
  
  <!-- Arrows -->
  <g filter="url(#glow)">
    <!-- S3 Input to SQS -->
    <line x1="150" y1="270" x2="150" y2="290" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="160" y="285" font-family="Arial, sans-serif" font-size="9" fill="#8892b0">S3 Event</text>
    
    <!-- SQS to Lambda -->
    <line x1="250" y1="370" x2="300" y2="210" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="270" y="280" font-family="Arial, sans-serif" font-size="9" fill="#8892b0">Poll</text>
    
    <!-- Lambda to DynamoDB -->
    <line x1="500" y1="210" x2="550" y2="210" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="525" y="200" font-family="Arial, sans-serif" font-size="9" fill="#8892b0">Track</text>
    
    <!-- Lambda to Glue -->
    <line x1="400" y1="290" x2="400" y2="320" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="410" y="310" font-family="Arial, sans-serif" font-size="9" fill="#8892b0">Manifest</text>
    
    <!-- Glue to S3 Output -->
    <line x1="500" y1="410" x2="550" y2="410" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="525" y="400" font-family="Arial, sans-serif" font-size="9" fill="#8892b0">Parquet</text>
    
    <!-- Glue to Control Plane -->
    <line x1="500" y1="360" x2="800" y2="200" stroke="#fed330" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
    <text x="650" y="270" font-family="Arial, sans-serif" font-size="9" fill="#fed330">State Change</text>
    
    <!-- Control Plane to CloudWatch -->
    <line x1="900" y1="270" x2="900" y2="290" stroke="#00d4aa" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- CloudWatch to SNS -->
    <line x1="900" y1="410" x2="900" y2="430" stroke="#ff6b6b" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- Stats Section -->
  <g transform="translate(50, 560)">
    <rect width="1100" height="100" rx="12" fill="#1e2a3a" stroke="#2d3a4f" stroke-width="1"/>
    <text x="550" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#64ffda">PIPELINE STATISTICS</text>
    
    <!-- Stat boxes -->
    <g transform="translate(50, 45)">
      <text x="0" y="20" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#00d4ff">700 GB</text>
      <text x="0" y="40" font-family="Arial, sans-serif" font-size="11" fill="#8892b0">/hour throughput</text>
    </g>
    <g transform="translate(300, 45)">
      <text x="0" y="20" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#00d4ff">200K</text>
      <text x="0" y="40" font-family="Arial, sans-serif" font-size="11" fill="#8892b0">files/hour</text>
    </g>
    <g transform="translate(550, 45)">
      <text x="0" y="20" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#00d4ff">~$15K</text>
      <text x="0" y="40" font-family="Arial, sans-serif" font-size="11" fill="#8892b0">/month cost</text>
    </g>
    <g transform="translate(800, 45)">
      <text x="0" y="20" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#00d4ff">2-5 min</text>
      <text x="0" y="40" font-family="Arial, sans-serif" font-size="11" fill="#8892b0">batch latency</text>
    </g>
  </g>
  
  <!-- Legend -->
  <g transform="translate(50, 700)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" fill="#8892b0">LEGEND:</text>
    <rect x="80" y="-10" width="16" height="16" rx="3" fill="#ff9f43"/>
    <text x="102" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">S3 Storage</text>
    <rect x="180" y="-10" width="16" height="16" rx="3" fill="#00d4ff"/>
    <text x="202" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">SQS Queue</text>
    <rect x="280" y="-10" width="16" height="16" rx="3" fill="#ff6b6b"/>
    <text x="302" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">Lambda</text>
    <rect x="370" y="-10" width="16" height="16" rx="3" fill="#a55eea"/>
    <text x="392" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">Glue</text>
    <rect x="440" y="-10" width="16" height="16" rx="3" fill="#26de81"/>
    <text x="462" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">DynamoDB</text>
    <rect x="540" y="-10" width="16" height="16" rx="3" fill="#74b9ff"/>
    <text x="562" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">CloudWatch</text>
    <rect x="650" y="-10" width="16" height="16" rx="3" fill="#fd79a8"/>
    <text x="672" y="2" font-family="Arial, sans-serif" font-size="10" fill="#ccc">SNS</text>
  </g>
  
  <!-- Version -->
  <text x="1150" y="780" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">v1.1.0 | December 2025</text>
</svg>
